---
import { SITE } from '../site';

type Props = {
	title?: string;
	description?: string;
};

const { title = SITE.title, description = SITE.description } = Astro.props;
const siteName = SITE.name;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
	</head>
	<body>
		<div class="page">
			<header class="header">
				<nav class="nav" aria-label="Primary">
					<a class="brand" href="/">{siteName}</a>
					<div class="links">
						<a href="/projects">Projects</a>
						<a href="/thoughts">Thoughts</a>
						<a href="/about">About</a>
					</div>
				</nav>
			</header>
			<main class="main">
				<slot />
			</main>
			<footer class="footer">
				<p class="muted">Â© {new Date().getFullYear()} {siteName}</p>
			</footer>
		</div>
	</body>
</html>

<style>
	:global(:root) {
		color-scheme: light;
		--bg: #ffffff;
		--text: #111827;
		--muted: #4b5563;
		--border: #e5e7eb;
		--max: 760px;
	}

	:global(*),
	:global(*::before),
	:global(*::after) {
		box-sizing: border-box;
	}

	:global(html, body) {
		margin: 0;
		padding: 0;
		background: var(--bg);
		color: var(--text);
		font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
			Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
		font-size: 16px;
		line-height: 1.65;
		text-rendering: optimizeLegibility;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	:global(body) {
		overflow-x: hidden;
	}

	:global(a) {
		color: inherit;
		text-underline-offset: 3px;
	}

	:global(a:hover) {
		text-decoration-thickness: 2px;
	}

	:global(h1, h2, h3) {
		letter-spacing: -0.015em;
		line-height: 1.2;
		margin: 0 0 0.75rem;
	}

	:global(p) {
		margin: 0 0 1rem;
		text-align: justify;
		hyphens: auto;
		overflow-wrap: anywhere;
	}

	:global(img) {
		max-width: 100%;
		height: auto;
		display: block;
	}

	:global(code) {
		font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
			monospace;
		font-size: 0.95em;
	}

	.page {
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	.header {
		border-bottom: 1px solid var(--border);
	}

	.nav {
		max-width: var(--max);
		margin: 0 auto;
		padding: 1.25rem max(1rem, env(safe-area-inset-right)) 1.25rem
			max(1rem, env(safe-area-inset-left));
		display: flex;
		align-items: baseline;
		justify-content: space-between;
		gap: 1rem;
	}

	.brand {
		text-decoration: none;
		font-weight: 600;
	}

	.links {
		display: flex;
		gap: 1rem;
	}

	.links a {
		text-decoration: none;
		color: var(--muted);
	}

	.links a:hover {
		text-decoration: underline;
		color: var(--text);
	}

	.main {
		max-width: var(--max);
		margin: 0 auto;
		padding: 2.25rem max(1rem, env(safe-area-inset-right)) 2.25rem
			max(1rem, env(safe-area-inset-left));
		width: 100%;
		flex: 1;
	}

	@media (max-width: 640px) {
		.main {
			max-width: 100%;
			padding: 1.75rem max(1rem, env(safe-area-inset-right)) 1.75rem
				max(1rem, env(safe-area-inset-left));
		}
	}

	.footer {
		border-top: 1px solid var(--border);
	}

	.footer p {
		max-width: var(--max);
		margin: 0 auto;
		padding: 1.25rem max(1rem, env(safe-area-inset-right)) 1.25rem
			max(1rem, env(safe-area-inset-left));
	}

	.muted {
		color: var(--muted);
	}
</style>
